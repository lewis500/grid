div(layout='row')
	md-switch(flex='20' ng-model='vm.paused' ng-change='vm.click(vm.paused)') {{vm.paused? 'Paused' : 'Play'}}
svg.vis(version="1.1" baseProfile="basic" x="0" y="0" viewBox="0 0 100 100" ng-init='traffic.setup()')
	rect.bg(width='100' height='100')
	g.g-main
		//- g(can-der width='100' height='100' cars='traffic.traveling')
		g.g-infrastructure
			g.g-intersections
				g.g-intersection(ng-repeat='i in traffic.intersections track by i.id' ng-attr-transform='{{::vm.place_intersection(i)}}')
					rect.intersection(width='2' height='2' x='-1' y='-1' )
					g.signal(signal-der direction='i.signal.direction')
			g.g-lanes
				g.g-lane(ng-repeat='d in traffic.lanes track by d.id' ng-attr-class='{{::d.direction}}')
					path.lane(ng-attr-d='{{::vm.place_lane(d)}}')
		g.g-cars
			rect.car(ng-repeat='car in traffic.traveling track by car.id' ng-attr-transform='{{vm.place_car(car)}}' width='.8' height='.8' y='-.4' x='-.4' ng-attr-fill='{{car.color}}')

//- mfd-der(memory = 'traffic.memory')