div(layout='row')
	md-switch(flex='20' ng-model='vm.paused' ng-change='vm.click(vm.paused)') {{vm.paused? 'Paused' : 'Play'}}
div(layout='row')
	div(flex)
		div(style='position: absolute;' two-der cars='traffic.traveling')
		svg.vis(version="1.1" baseProfile="basic" x="0" y="0" viewBox="0 0 100 100" )
			defs
				marker#markerArrow(markerwidth='1' markerheight='1' orient='auto')
					polygon(points=".1,.5 .25,.25 .1,.1" stroke-width='.1')

			rect.bg(width='100' height='100')

			g.g-main(transform='translate(0,0)')
				g.g-infrastructure
					g.g-intersections
						g.g-intersection(ng-repeat='i in traffic.intersections track by i.id' ng-attr-transform='{{::vm.place_intersection(i)}}')
							rect.intersection(width='2' height='2' x='-1' y='-1'  ng-class='{outer: i.outer}')
							g.signal(signal-der direction='i.signal.direction')
					g.g-lanes
						g.g-lane(ng-repeat='d in traffic.lanes track by d.id' ng-attr-class='{{::d.direction}}')
							path.lane(ng-attr-d='{{::vm.place_lane(d)}}' )
			//- g.g-cars
			//- rect.car(ng-repeat='car in traffic.traveling track by car.id' ng-attr-transform='{{vm.place_car(car)}}' width='.8' height='.8' y='-.4' x='-.4' ng-attr-fill='{{car.color}}')

	div(memory = 'traffic.memory' mfd-der flex offset='10')